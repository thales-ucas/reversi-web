(function(t){function e(e){for(var o,i,c=e[0],l=e[1],f=e[2],u=0,p=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);s&&s(e);while(p.length)p.shift()();return a.push.apply(a,f||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var f=0;f<c.length;f++)e(c[f]);var s=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2324:function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"h3[data-v-8b435f58]{margin:40px 0 0}ul[data-v-8b435f58]{list-style-type:none;padding:0}li[data-v-8b435f58]{display:inline-block;margin:0 10px}a[data-v-8b435f58]{color:#42b983}",""]),t.exports=e},"364d":function(t,e,n){t.exports=n.p+"img/square.40d3af04.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function r(t,e,n,r,a,i){var c=Object(o["g"])("game");return Object(o["d"])(),Object(o["b"])(c,{msg:"Welcome to Your Vue.js App"})}var a=Object(o["i"])("data-v-8b435f58");Object(o["f"])("data-v-8b435f58");var i={class:"game"},c=Object(o["c"])("div",null,"Reversi",-1),l=Object(o["c"])("span",null,"黑棋:",-1),f=Object(o["c"])("span",null,"白棋:",-1);Object(o["e"])();var s=a((function(t,e,n,r,a,s){return Object(o["d"])(),Object(o["b"])("div",i,[c,Object(o["c"])("div",null,[Object(o["c"])("canvas",{ref:"game",width:"500",height:"500",onClick:e[1]||(e[1]=function(){return s.onGameClick&&s.onGameClick.apply(s,arguments)})},null,512)]),Object(o["c"])("div",null,[Object(o["c"])("ul",null,[Object(o["c"])("li",null,[l,Object(o["c"])("span",null,Object(o["h"])(a.black),1)]),Object(o["c"])("li",null,[f,Object(o["c"])("span",null,Object(o["h"])(a.white),1)])])])])})),u=n("5a89"),p=(n("99af"),n("b0c0"),n("b85c")),v=(n("04d3"),n("364d")),d=n.n(v),b=function t(){var e=this;e.row=NaN,e.col=NaN,e.init=function(){var n=new u["a"](t.WIDTH,t.HEIGHT,t.WIDTH),o=(new u["k"]).load(d.a),r=new u["f"]({color:16755200,map:o});u["e"].call(e,n,r)},e.blink=function(){e.position.y+=5},e.init()};b.WIDTH=10,b.HEIGHT=2,b.prototype=Object.create(u["e"].prototype),b.prototype.constructor=b;var h=b,E=(n("c975"),n("3835")),O=function t(){var e=this,n=null,o=null;function r(e,o,r){if(0!==n[e][o])return!1;if(!a(o,e))return!1;n[e][o]=r;for(var i=[],c=r===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,l=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],f=0,s=l;f<s.length;f++){var u=s[f],p=Object(E["a"])(u,2),v=p[0],d=p[1],b=parseInt(o),h=parseInt(e);if(b+=v,h+=d,a(h,b)&&n[h][b]===c)do{if(b+=v,h+=d,!a(h,b))break}while(n[h][b]===c);if(a(h,b)&&n[h][b]===r)while(a(h,b)){if(b-=v,h-=d,h==parseInt(e)&&b==parseInt(o))break;i.push({col:b,row:h})}}return n[e][o]=0,0!==i.length&&i}function a(e,n){return e>=0&&e<=t.ROW-1&&n>=0&&n<=t.COL-1}function i(){var e,o={black:0,white:0},r=Object(p["a"])(n);try{for(r.s();!(e=r.n()).done;){var a,i=e.value,c=Object(p["a"])(i);try{for(c.s();!(a=c.n()).done;){var l=a.value;l===t.CHESS.BLACK?o.black++:l===t.CHESS.WHITE&&o.white++}}catch(f){c.e(f)}finally{c.f()}}}catch(f){r.e(f)}finally{r.f()}return o}e.init=function(){e.reset()},e.reset=function(){n=[];for(var e=0;e<t.ROW;e++){for(var o=[],r=0;r<t.COL;r++)o.push(0);n.push(o)}},e.start=function(){e.move(3,4,t.CHESS.BLACK,!0),e.move(3,3,t.CHESS.WHITE,!0),e.move(4,3,t.CHESS.BLACK,!0),e.move(4,4,t.CHESS.WHITE,!0),o=t.CHESS.BLACK;var n={type:t.EVENT.START,data:o};e.dispatchEvent(n)},e.getData=function(){return n},e.move=function(o,a,c,l){var f=!1;if(!l){if(f=r(o,a,c),!f)return;var s,u=Object(p["a"])(f);try{for(u.s();!(s=u.n()).done;){var v=s.value;n[v.row][v.col]=c}}catch(E){u.e(E)}finally{u.f()}}n[o][a]=c;var d=i(),b={row:o,col:a,color:c,flips:f,count:d},h={type:t.EVENT.MOVE,data:b};e.dispatchEvent(h)},e.getLegal=function(e){var o=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],i=e===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,c=[];for(var l in n)for(var f in n[l])if(n[l][f]===i){var s,u=Object(p["a"])(o);try{for(u.s();!(s=u.n()).done;){var v=s.value,d=Object(E["a"])(v,2),b=d[0],h=d[1],O=parseInt(f)+b,g=parseInt(l)+h;a(g,O)&&n[g][O]===t.CHESS.NONE&&-1===c.indexOf([O,g])&&c.push([O,g])}}catch(j){u.e(j)}finally{u.f()}}for(var S=[],y=0,m=c;y<m.length;y++){var w=m[y];r(w[1],w[0],e)&&S.push(w)}return S},e.init()};O.ROW=8,O.COL=8,O.CHESS={NONE:0,BLACK:1,WHITE:2},O.EVENT={START:"gameStart",GAME_OVER:"gameOver",MOVE:"chessMove",FLIP:"chessFlip"},Object.assign(O.prototype,u["d"].prototype),O.prototype.constructor=O;var g=O,S=function t(e){var n=this;n.init=function(e){var o=new u["c"](t.RADIUS,t.RADIUS,t.WIDTH,t.SEGMENT),r=[new u["f"]({color:"red"}),new u["f"]({color:"black"}),new u["f"]({color:"white"})];u["e"].call(n,o,r),e==g.CHESS.WHITE&&(n.rotation.x=Math.PI)},n.flip=function(){n.rotateX(Math.PI)},n.init(e)};S.RADIUS=4,S.HEIGHT=1,S.SEGMENT=20,S.prototype=Object.create(u["e"].prototype),S.prototype.constructor=S;var y=S,m=function(){var t=this,e=null,n=null;t.offset={row:0,col:0},t.init=function(){u["g"].call(t),e=new u["g"],n=new u["g"],t.add(e,n)},t.hit=function(t){var n=t.intersectObjects(e.children),o=null;return n.length>0&&(o=n[0]),o},t.pave=function(o){for(var r in e.clear(),t.offset.row=o.length/2*h.WIDTH-h.WIDTH/2,t.offset.col=t.offset.row,o)for(var a in o[r]){var i=new h;i.row=r,i.col=a,i.position.x=a*h.WIDTH,i.position.z=r*h.WIDTH,e.add(i)}e.position.set(-t.offset.col,0,-t.offset.row),n.position.set(-t.offset.col,h.HEIGHT,-t.offset.row)},t.move=function(t,e,o){var r=new y(o);r.position.x=e*h.WIDTH,r.position.z=t*h.WIDTH,r.name="".concat(t,"-").concat(e),n.add(r)},t.flip=function(t){if(t){var e,o=Object(p["a"])(t);try{for(o.s();!(e=o.n()).done;){var r=e.value,a=r.row,i=r.col,c=n.getObjectByName("".concat(a,"-").concat(i));c.flip()}}catch(l){o.e(l)}finally{o.f()}}},t.init()};m.prototype=Object.create(u["g"].prototype),m.prototype.constructor=m;var w=m,j=function t(){var e=this;e.init=function(){},e.getColor=function(){return g.CHESS.WHITE},e.think=function(n){var o=parseInt(Math.random()*n.length),r=Object(E["a"])(n[o],2),a=r[0],i=r[1],c={col:a,row:i,color:e.getColor()};setTimeout((function(){var n={type:t.EVENT.MOVE,data:c};e.dispatchEvent(n)}),1e3)},e.init()};j.EVENT={MOVE:"aiPlayerMove"},j.prototype=Object.create(u["d"].prototype),j.prototype.constructor=j;var T=j,H={RUNNING:"running",MODEL_LOADED:"modeLoaded",PERSON_FAIL:"personFail",GAME_INIT:"gameInit",GAME_START:"gameStart",GAME_STEP:"gameStep",GAME_OVER:"gameOver"},C=function(t){var e=this,n=0,o=0,r=null,a=null,i=null,c=null,l=null,f=null,s=null,p=!1,v=!1;function d(t){console.log(t),p=!0,v=!0}function b(t){var n=t.data,o=n.row,r=n.col,a=n.color,i=n.flips,l=n.count;c.move(o,r,a),c.flip(i);var u={type:H.GAME_STEP,data:l};e.dispatchEvent(u),p&&a===g.CHESS.BLACK?(v=!1,s.think(f.getLegal(s.getColor()))):p&&a===g.CHESS.WHITE&&(v=!0)}function h(t){var e=t.data,n=e.row,o=e.col,r=e.color;f.move(n,o,r)}function E(){requestAnimationFrame(E),i.render(a,r)}e.init=function(t){n=500,o=500,a=new u["j"],a.background=new u["b"]("skyblue"),r=new u["h"](75,n/o,1,1e3),r.position.set(0,60,20),i=new u["m"]({canvas:t}),i.setSize(n,o),l=new u["i"],f=new g,f.addEventListener(g.EVENT.START,d),f.addEventListener(g.EVENT.MOVE,b),s=new T,s.addEventListener(T.EVENT.MOVE,h),c=new w,c.pave(f.getData()),a.add(c),r.lookAt(c.position),E()},e.start=function(){f.start()},e.click=function(t,e){if(v){var a=new u["l"];a.x=t/n*2-1,a.y=-e/o*2+1,l.setFromCamera(a,r);var i=c.hit(l);if(i){var s=i.object,p=s.row,d=s.col;f.move(p,d,g.CHESS.BLACK)}}},e.init(t)};Object.assign(C.prototype,u["d"].prototype),C.prototype.constructor=C;var I={name:"Game",props:{msg:String},data:function(){return{black:0,white:0}},__reversi:null,mounted:function(){this.__reversi=new C(this.$refs["game"]),this.__reversi.addEventListener(H.GAME_STEP,this.onGameStep),this.__reversi.start()},methods:{onGameClick:function(t){this.__reversi.click(t.x-this.$refs["game"].offsetLeft,t.y-this.$refs["game"].offsetTop)},onGameStep:function(t){console.log(t),this.black=t.data.black,this.white=t.data.white}}};n("87f0");I.render=s,I.__scopeId="data-v-8b435f58";var A=I,M={name:"App",components:{Game:A}};n("5873");M.render=r;var k=M;Object(o["a"])(k).mount("#app")},5873:function(t,e,n){"use strict";n("c551")},"5f1d":function(t,e,n){var o=n("2324");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("5a0b0ebf",o,!0,{sourceMap:!1,shadowMode:!1})},"71ea":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}",""]),t.exports=e},"87f0":function(t,e,n){"use strict";n("5f1d")},c551:function(t,e,n){var o=n("71ea");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("660cbf8c",o,!0,{sourceMap:!1,shadowMode:!1})}});
//# sourceMappingURL=app.c164a6a5.js.map