{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/game.vue?2917","webpack:///./src/components/reversi/textures/square.jpg","webpack:///./src/app.vue","webpack:///./src/components/game.vue","webpack:///./src/components/reversi/square.js","webpack:///./src/components/reversi/engine.js","webpack:///./src/components/reversi/piece.js","webpack:///./src/components/reversi/board.js","webpack:///./src/components/reversi/ai-player.js","webpack:///./src/components/reversi/main.js","webpack:///./src/components/game.vue?15c7","webpack:///./src/app.vue?1c87","webpack:///./src/main.js","webpack:///./src/app.vue?1bdf","webpack:///./src/components/game.vue?6aa3","webpack:///./src/app.vue?7575","webpack:///./src/components/game.vue?a7b7","webpack:///./src/app.vue?ca1a"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","___CSS_LOADER_API_IMPORT___","msg","class","ref","width","height","onGameClick","black","white","Square","_this","this","row","NaN","col","init","g","BoxGeometry","WIDTH","HEIGHT","TextureLoader","load","image","MeshBasicMaterial","color","map","Mesh","blink","position","y","constructor","Engine","_data","_action","getFilp","isValid","arr","opColor","CHESS","BLACK","WHITE","direction","coord","xdirection","ydirection","x","parseInt","ROW","COL","getCount","counter","reset","start","move","e","type","EVENT","START","dispatchEvent","getData","force","flips","obj","count","MOVE","getLegal","nears","dx","dy","NONE","indexOf","GAME_OVER","FLIP","assign","EventDispatcher","Piece","param","geometry","CylinderGeometry","RADIUS","SEGMENT","materials","rotation","Math","PI","flip","rotateX","Board","__bg","__chess","offset","Object3D","add","hit","raycaster","intersects","intersectObjects","children","ret","pave","clear","square","z","set","piece","getObjectByName","AIPlayer","getColor","think","k","random","setTimeout","RUNNING","MODEL_LOADED","PERSON_FAIL","GAME_INIT","GAME_START","GAME_STEP","main","container","__camera","__scene","__renderer","__board","_raycaster","_engine","_ai","_running","_enable","onChessStart","console","log","onChessMove","event","onAIMove","animate","requestAnimationFrame","render","canvas","Scene","background","Color","PerspectiveCamera","WebGLRenderer","setSize","Raycaster","addEventListener","lookAt","click","vec","Vector2","setFromCamera","props","String","__reversi","mounted","$refs","onGameStep","methods","offsetLeft","offsetTop","__scopeId","components","Game","createApp","App","mount","content","locals","default"],"mappings":"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","file":"js/app.c164a6a5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"h3[data-v-8b435f58]{margin:40px 0 0}ul[data-v-8b435f58]{list-style-type:none;padding:0}li[data-v-8b435f58]{display:inline-block;margin:0 10px}a[data-v-8b435f58]{color:#42b983}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","module.exports = __webpack_public_path__ + \"img/square.40d3af04.jpg\";","<template>\n  <game msg=\"Welcome to Your Vue.js App\"/>\n</template>\n\n<script>\nimport Game from './components/game.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Game\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <div class=\"game\">\n    <div>Reversi</div>\n    <div><canvas ref=\"game\" width=\"500\" height=\"500\" @click=\"onGameClick\"></canvas></div>\n    <div>\n      <ul>\n        <li><span>黑棋:</span><span>{{black}}</span></li>\n        <li><span>白棋:</span><span>{{white}}</span></li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as Reversi from \"./reversi/main\";\nexport default {\n  name: 'Game',\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      black: 0,\n      white: 0\n    };\n  },\n  __reversi: null,\n  mounted() {\n    this.__reversi = new Reversi.main(this.$refs['game']);\n    this.__reversi.addEventListener(Reversi.EVENT.GAME_STEP, this.onGameStep);\n    this.__reversi.start();\n  },\n  methods: {\n    onGameClick(e) {\n      this.__reversi.click(e.x - this.$refs['game'].offsetLeft, e.y - this.$refs['game'].offsetTop);\n    },\n    onGameStep(e) {\n      console.log(e);\n      this.black = e.data.black;\n      this.white = e.data.white;\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n","import { Mesh, BoxGeometry, MeshBasicMaterial, TextureLoader } from 'three';\r\nimport image from './textures/square.jpg';\r\n/**\r\n *\t方块\r\n */\r\nconst Square = function() {\r\n  const _this = this;\r\n  _this.row = NaN;\r\n  _this.col = NaN;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    const g = new BoxGeometry(Square.WIDTH, Square.HEIGHT, Square.WIDTH);\r\n    const t = new TextureLoader().load(image);\r\n    const m = new MeshBasicMaterial( { color: 0xffaa00, map: t } );\r\n    Mesh.call(_this, g, m);\r\n  };\r\n  _this.blink = () => {\r\n    _this.position.y += 5;\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nSquare.WIDTH = 10;\r\nSquare.HEIGHT = 2;\r\n\r\nSquare.prototype = Object.create( Mesh.prototype );\r\nSquare.prototype.constructor = Square;\r\nexport default Square;","import { EventDispatcher } from 'three';\r\n/**\r\n *\t引擎\r\n */\r\nconst Engine = function(){\r\n  const _this = this;\r\n  let _data = null; // 棋盘数据\r\n  let _action = null; // 行动方\r\n  /**\r\n   *\t初始化\r\n   */\r\n  _this.init = function() {\r\n    _this.reset();\r\n  };\r\n  /**\r\n   * 复位\r\n   */\r\n  _this.reset = () => {\r\n    _data = [];\r\n    for(let m = 0; m < Engine.ROW; m++) {\r\n      const arr = [];\r\n      for(let n = 0; n < Engine.COL; n++) {\r\n        arr.push(0);\r\n      }\r\n      _data.push(arr);\r\n    }\r\n  };\r\n  /**\r\n   * 开始游戏\r\n   */\r\n  _this.start = () => {\r\n    _this.move(3, 4, Engine.CHESS.BLACK, true);\r\n    _this.move(3, 3, Engine.CHESS.WHITE, true);\r\n    _this.move(4, 3, Engine.CHESS.BLACK, true);\r\n    _this.move(4, 4, Engine.CHESS.WHITE, true);\r\n    _action = Engine.CHESS.BLACK;\r\n    const e = { type: Engine.EVENT.START, data: _action };\r\n    _this.dispatchEvent(e);\r\n    // const arr = getLegal(Engine.CHESS.BLACK);\r\n    // console.log(arr);\r\n  };\r\n  /**\r\n   * 获取数据\r\n   */\r\n  _this.getData = () => {\r\n    return _data;\r\n  };\r\n  /**\r\n   * 走棋\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   * @param {int} color 棋子颜色\r\n   * @param {Boolean} force 强行\r\n   */\r\n  _this.move = (row, col, color, force) => {\r\n    let flips = false;\r\n    if ( !force ) {\r\n      flips = getFilp(row, col, color);\r\n      if(flips) {\r\n        for(const obj of flips) {\r\n          _data[obj.row][obj.col] = color;\r\n        }\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n    _data[row][col] = color;\r\n    const count = getCount();\r\n    const data = { row, col, color, flips, count };\r\n    const e = { type: Engine.EVENT.MOVE, data };\r\n    _this.dispatchEvent(e);\r\n  };\r\n  function getFilp(row, col, color) {\r\n    if (_data[row][col] !== 0) {\r\n      return false;\r\n    }\r\n    if (!isValid(col, row)) {\r\n      return false;\r\n    }\r\n    _data[row][col] = color;\r\n    const arr = [];\r\n    const opColor = color === Engine.CHESS.BLACK ? Engine.CHESS.WHITE : Engine.CHESS.BLACK;\r\n    const direction = [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1], [-1, 0], [-1, 1]];\r\n    for(const coord of direction) {\r\n      const [ xdirection, ydirection ] = coord;\r\n      let x = parseInt(col);\r\n      let y = parseInt(row);\r\n      x += xdirection;\r\n      y += ydirection;\r\n      if(isValid(y, x) && _data[y][x] === opColor) {\r\n        do {\r\n          x += xdirection;\r\n          y += ydirection;  \r\n          if(!isValid(y, x)) break;\r\n        } while(_data[y][x] === opColor);\r\n      }\r\n      if(!isValid(y, x)) continue;\r\n      if(_data[y][x] === color) {\r\n        while (isValid(y, x)) {          \r\n          x -= xdirection;\r\n          y -= ydirection;\r\n          if (y == parseInt(row) && x == parseInt(col)) break;\r\n          arr.push({col:x, row:y});\r\n        }\r\n        // for(x -= xdirection, y -= ydirection;x !== parseInt(col) && y !== parseInt(row);x -= xdirection,y -= ydirection) {\r\n        //   arr.push({col:x, row:y});\r\n        // }\r\n      }\r\n    }\r\n    _data[row][col] = 0;\r\n    if(arr.length === 0) return false;\r\n    return arr;\r\n  }\r\n  /**\r\n   * 获取合法点\r\n   * @param {emun} color 棋色\r\n   */\r\n  _this.getLegal = (color) => {\r\n    const direction = [[-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1]];\r\n    const opColor = color === Engine.CHESS.BLACK ? Engine.CHESS.WHITE : Engine.CHESS.BLACK;\r\n    const nears = [];\r\n    for(const m in _data) {\r\n      for(const n in _data[m]) {\r\n        if(_data[m][n] === opColor) {\r\n          for(const coord of direction) {\r\n            const [ dx, dy ] = coord;\r\n            let x = parseInt(n) + dx;\r\n            let y = parseInt(m) + dy;\r\n            if(isValid(y, x) && _data[y][x]=== Engine.CHESS.NONE && nears.indexOf([x, y]) === -1) {\r\n              nears.push([x, y]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const arr = [];\r\n    for(const coord of nears) {\r\n      if(getFilp(coord[1], coord[0], color)) {\r\n        arr.push(coord);\r\n      }\r\n    }\r\n    return arr;\r\n  };\r\n  /**\r\n   * 在棋盘上\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   */\r\n  function isValid( row, col ) {\r\n    return (row >= 0 && row <= Engine.ROW - 1 && col >= 0 && col <= Engine.COL - 1);\r\n  }\r\n  /**\r\n   * 获取统计\r\n   */\r\n  function getCount() {\r\n    const counter = {\r\n      black: 0,\r\n      white: 0\r\n    };\r\n    for(const row of _data) {\r\n      for(const col of row) {\r\n        if(col === Engine.CHESS.BLACK) {\r\n          counter.black++;\r\n        } else if(col === Engine.CHESS.WHITE) {\r\n          counter.white++;\r\n        }\r\n      }\r\n    }\r\n    return counter;\r\n  }\r\n  _this.init();\r\n};\r\nEngine.ROW = 8;\r\nEngine.COL = 8;\r\nEngine.CHESS = {\r\n  NONE: 0,\r\n  BLACK: 1,\r\n  WHITE: 2\r\n};\r\nEngine.EVENT = {\r\n  START: \"gameStart\",\r\n  GAME_OVER: \"gameOver\",\r\n  MOVE: \"chessMove\",\r\n  FLIP: \"chessFlip\"\r\n};\r\n\r\nObject.assign( Engine.prototype, EventDispatcher.prototype );\r\nEngine.prototype.constructor = Engine;\r\nexport default Engine;","import { Mesh, CylinderGeometry, MeshBasicMaterial } from 'three';\r\nimport Engine from './engine';\r\n/**\r\n *\t棋子\r\n */\r\nconst Piece = function(param) {\r\n  const _this = this;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = (color) => {\r\n    const geometry = new CylinderGeometry(Piece.RADIUS, Piece.RADIUS, Piece.WIDTH, Piece.SEGMENT);\r\n    const materials = [\r\n      new MeshBasicMaterial( { color: \"red\" } ),\r\n      new MeshBasicMaterial( { color: \"black\" } ),\r\n      new MeshBasicMaterial( { color: \"white\" } )\r\n    ];\r\n    Mesh.call(_this, geometry, materials);\r\n    if(color == Engine.CHESS.WHITE) {\r\n      _this.rotation.x = Math.PI;\r\n    }\r\n  };\r\n  /**\r\n   * 翻转\r\n   */\r\n  _this.flip = () => {\r\n    _this.rotateX(Math.PI);\r\n  };\r\n\t_this.init(param);\r\n};\r\n\r\nPiece.RADIUS = 4;\r\nPiece.HEIGHT = 1;\r\nPiece.SEGMENT = 20;\r\n\r\nPiece.prototype = Object.create( Mesh.prototype );\r\nPiece.prototype.constructor = Piece;\r\nexport default Piece;","import { Object3D } from 'three';\r\nimport Square from './square';\r\nimport Piece from './piece';\r\n\r\n/**\r\n *\t棋盘\r\n */\r\nconst Board = function() {\r\n  const _this = this;\r\n  let __bg = null, // 背景\r\n    __chess = null; // 棋子\r\n  _this.offset = { // 偏移位置\r\n    row: 0,\r\n    col: 0,\r\n  };\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    Object3D.call(_this);\r\n    __bg = new Object3D();\r\n    __chess = new Object3D();\r\n    _this.add(__bg, __chess);\r\n  };\r\n  /**\r\n   * 触碰\r\n   * @param {raycaster} raycaster 射线\r\n   */\r\n  _this.hit = raycaster => {\r\n    const intersects = raycaster.intersectObjects( __bg.children );\r\n    let ret = null;\r\n    if(intersects.length > 0) {\r\n      ret = intersects[0];\r\n    }\r\n    return ret;\r\n  };\r\n  /**\r\n   * 铺路\r\n   */\r\n  _this.pave = (data) => {\r\n    __bg.clear();\r\n    _this.offset.row = data.length / 2 * Square.WIDTH - Square.WIDTH / 2;\r\n    _this.offset.col = _this.offset.row;\r\n    for ( const m in data ) {\r\n      for ( const n in data[m] ) {\r\n        const square = new Square();\r\n        square.row = m;\r\n        square.col = n;\r\n        square.position.x = n * Square.WIDTH;\r\n        square.position.z = m * Square.WIDTH;\r\n        __bg.add(square);\r\n      }\r\n    }\r\n    __bg.position.set(-_this.offset.col, 0, -_this.offset.row);\r\n    __chess.position.set(-_this.offset.col, Square.HEIGHT, -_this.offset.row);\r\n  };\r\n  /**\r\n   * 走棋\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   * @param {int} color 颜色\r\n   */\r\n  _this.move = (row, col, color) => {\r\n    const piece = new Piece(color);\r\n    piece.position.x = col * Square.WIDTH;\r\n    piece.position.z = row * Square.WIDTH;\r\n    piece.name = `${row}-${col}`;\r\n    __chess.add(piece);\r\n  };\r\n  /**\r\n   * 翻转\r\n   * @param {array} arr \r\n   */\r\n  _this.flip = (arr) => {\r\n    if (arr) {\r\n      for(const obj of arr) {\r\n        const { row, col } = obj;\r\n        const piece = __chess.getObjectByName(`${row}-${col}`);\r\n        piece.flip();\r\n      }\r\n    }\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nBoard.prototype = Object.create( Object3D.prototype );\r\nBoard.prototype.constructor = Board;\r\nexport default Board;","import { EventDispatcher } from 'three';\r\nimport Engine from './engine';\r\n\r\n/**\r\n *\t电脑玩家\r\n */\r\nconst AIPlayer = function() {\r\n  const _this = this;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    \r\n  };\r\n  /**\r\n   * 获取棋色\r\n   */\r\n  _this.getColor = () => {\r\n    return Engine.CHESS.WHITE;\r\n  };\r\n  /**\r\n   * 思考\r\n   * @param {Array} arr 可走的步骤\r\n   */\r\n  _this.think = (arr) => {\r\n    const k = parseInt(Math.random() * arr.length);\r\n    //return arr[k];\r\n    const [ col, row ] = arr[k];\r\n    const data = { col, row, color: _this.getColor() };\r\n    setTimeout(() => {\r\n      const e = { type: AIPlayer.EVENT.MOVE, data };\r\n      _this.dispatchEvent(e);        \r\n    }, 1000);\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nAIPlayer.EVENT = {\r\n  MOVE: \"aiPlayerMove\"\r\n};\r\n\r\n\r\nAIPlayer.prototype = Object.create( EventDispatcher.prototype );\r\nAIPlayer.prototype.constructor = AIPlayer;\r\nexport default AIPlayer;","import { WebGLRenderer, EventDispatcher, PerspectiveCamera, Scene, Color, Raycaster, Vector2 } from 'three';\r\nimport Board from './board';\r\nimport Engine from './engine';\r\nimport AIPlayer from './ai-player';\r\n/**\r\n *\t版本\r\n */\r\nconst VER = \"1.0\";\r\n/**\r\n *\t事件\r\n */\r\nconst EVENT = {\r\n  RUNNING:\t\"running\",\r\n  MODEL_LOADED:\t\"modeLoaded\",\r\n  PERSON_FAIL: \"personFail\",\r\n  GAME_INIT: \"gameInit\",\r\n  GAME_START:\t\"gameStart\",\r\n  GAME_STEP: \"gameStep\",\r\n  GAME_OVER:\t\"gameOver\"\r\n};\r\nconst main = function(container){\r\n  const _this = this;\r\n  \r\n  let WIDTH = 0,\r\n    HEIGHT = 0;\r\n    \r\n  let __camera = null,\t//摄像头\r\n    __scene = null,\t//场景\r\n    __renderer = null,\t//渲染器\r\n    __board = null;\t//棋盘\r\n  let _raycaster = null, // 射线\r\n    _engine = null, // 游戏引擎\r\n    _ai = null, // 电脑玩家\r\n    _running = false, // 游戏运行中\r\n    _enable = false; // 激活状态\r\n  var __stats = null;\t//fps\r\n  /**\r\n   *\t初始化\r\n   */\r\n  _this.init = function(canvas) {\r\n    // console.log(container.attributes);\r\n    WIDTH = 500;\r\n    HEIGHT = 500;\r\n    __scene = new Scene();\r\n    __scene.background = new Color( 'skyblue' );\r\n    __camera = new PerspectiveCamera( 75, WIDTH / HEIGHT, 1, 1000 );\r\n    __camera.position.set(0, 60, 20);\r\n    __renderer = new WebGLRenderer({canvas});\r\n    __renderer.setSize( WIDTH, HEIGHT );\r\n    _raycaster = new Raycaster();\r\n    _engine = new Engine();\r\n    _engine.addEventListener( Engine.EVENT.START, onChessStart );\r\n    _engine.addEventListener( Engine.EVENT.MOVE, onChessMove );\r\n    _ai = new AIPlayer();\r\n    _ai.addEventListener( AIPlayer.EVENT.MOVE, onAIMove );\r\n    __board = new Board();\r\n    __board.pave(_engine.getData());\r\n    __scene.add( __board );\r\n    __camera.lookAt(__board.position);\r\n    animate();\r\n  };\r\n  _this.start = () => {\r\n    _engine.start();\r\n  };\r\n  /**\r\n   * 点击\r\n   * @param {int} x \r\n   * @param {int} y \r\n   */\r\n  _this.click = (x, y) => {\r\n    if (!_enable) return;\r\n    const vec = new Vector2();\r\n    vec.x = ( x / WIDTH ) * 2 - 1;\r\n    vec.y = - ( y / HEIGHT ) * 2 + 1;\r\n    _raycaster.setFromCamera( vec, __camera ); // 根据摄像头引射线\r\n    const ret = __board.hit(_raycaster); // 射线触碰决定用户点击的位置\r\n    if (ret) { // 玩家走棋\r\n      const { row, col } = ret.object;\r\n      _engine.move(row, col, Engine.CHESS.BLACK);\r\n    }\r\n  };\r\n  /**\r\n   * 游戏开始\r\n   * @param {event} e \r\n   */\r\n  function onChessStart(e) {\r\n    console.log(e);\r\n    _running = true;\r\n    _enable = true;\r\n  }\r\n  /**\r\n   * 走棋\r\n   * @param {event} e \r\n   */\r\n  function onChessMove(e) {\r\n    const { row, col, color, flips, count } = e.data;\r\n    __board.move( row, col, color );\r\n    __board.flip(flips);\r\n    const event = { type: EVENT.GAME_STEP, data: count};\r\n    _this.dispatchEvent(event);\r\n    if(_running && color === Engine.CHESS.BLACK) {\r\n      _enable = false;\r\n      _ai.think(_engine.getLegal(_ai.getColor()));\r\n    } else if(_running && color === Engine.CHESS.WHITE) {\r\n      _enable = true;\r\n    }\r\n  }\r\n  /**\r\n   * 电脑走棋\r\n   * @param {event} e \r\n   */\r\n  function onAIMove(e) {\r\n    const { row, col, color } = e.data;\r\n    _engine.move(row, col, color);\r\n  }\r\n  function animate() {\r\n    requestAnimationFrame( animate );\r\n    __renderer.render( __scene, __camera );\r\n  }\r\n  _this.init(container);\r\n};\r\n\r\nObject.assign( main.prototype, EventDispatcher.prototype);\r\nmain.prototype.constructor = main;\r\nexport {main, VER, EVENT};","import { render } from \"./game.vue?vue&type=template&id=8b435f58&scoped=true\"\nimport script from \"./game.vue?vue&type=script&lang=js\"\nexport * from \"./game.vue?vue&type=script&lang=js\"\n\nimport \"./game.vue?vue&type=style&index=0&id=8b435f58&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-8b435f58\"\n\nexport default script","import { render } from \"./app.vue?vue&type=template&id=a9fca96e\"\nimport script from \"./app.vue?vue&type=script&lang=js\"\nexport * from \"./app.vue?vue&type=script&lang=js\"\n\nimport \"./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue';\nimport App from './app.vue';\n\ncreateApp(App).mount('#app');\n","export * from \"-!../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./game.vue?vue&type=style&index=0&id=8b435f58&scoped=true&lang=css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5a0b0ebf\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./game.vue?vue&type=style&index=0&id=8b435f58&scoped=true&lang=css\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"660cbf8c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}